# План тестирования — Craneshell

## 1. Общая информация

Этот документ описывает стратегию и объём тестирования веб-приложения **Craneshell** — сервиса для создания и управления терминальными цветовыми темами. Приложение состоит из **Backend на FastAPI + PostgreSQL** и **multi-page Frontend (HTML/JS/CSS)**.

Цель тестирования — убедиться, что аутентификация, CRUD для конфигов, публичные темы и интерактивный конфигуратор (16‑цветная палитра + терминал) работают корректно и безопасно.

## 2. Цели тестирования

1. Проверить функциональность всех основных API эндпоинтов (`/api/auth/*`, `/api/configs/*`, `/api/public/*`, `/api/health`).
2. Валидировать CRUD операции для пользовательских конфигов (создание, редактирование, удаление, публикация).
3. Убедиться в корректной работе JWT аутентификации и разграничения доступа к конфигам по пользователю.
4. Проверить интеграцию frontend страниц (`login.html`, `dashboard.html`, `configurator.html`, `profile.html`, `public.html`) с API.
5. Проверить корректность работы **интерактивного терминала** и 16‑цветной палитры на странице `configurator.html`.
6. Оценить устойчивость к базовым угрозам безопасности (SQL injection, XSS, несанкционированный доступ к чужим конфигам).
7. Проверить обработку ошибок и UX (валидация форм, сообщения об ошибках, состояния loading/empty).

## 3. Область тестирования

### В области тестирования

- Backend API:
  - Регистрация и логин пользователя.
  - CRUD для конфигов (личные и публичные).
  - Получение списка публичных конфигов с пагинацией и фильтрами.
  - Health‑check эндпоинт.
- Frontend:
  - Страница логина/регистрации (`login.html`).
  - Dashboard с таблицей/картами конфигов (`dashboard.html`).
  - Конфигуратор с 16 цветами и интерактивным терминалом (`configurator.html`).
  - Страница профиля с базовой статистикой (`profile.html`).
  - Публичные темы с поиском и фильтрами (`public.html`).
- Авторизация:
  - Доступ к приватным конфигам только владельцу.
  - Попытка чтения/удаления чужого конфига.
- UI/UX:
  - Состояния: loading, empty, error.
  - Адаптивность (desktop + basic mobile).

### Вне области тестирования

- Нагрузочное тестирование (>100 одновременных пользователей).
- Полное кросс‑браузерное покрытие (фокус на Chromium/Firefox).
- Accessibility аудит (WCAG).
- Интеграция с внешними сервисами (если появятся позже).

## 4. Стратегия тестирования

Сочетание **автоматизированных тестов backend** (pytest + httpx/TestClient) и **ручного функционального тестирования frontend** в браузере.

### Инструменты

| Тип                | Инструмент           | Описание                          |
|--------------------|----------------------|-----------------------------------|
| Тест-раннер        | pytest               | Юнит и интеграционные тесты API  |
| HTTP-клиент        | httpx / TestClient   | Тестирование FastAPI эндпоинтов  |
| БД для тестов      | PostgreSQL test DB   | Отдельная тестовая схема/БД      |
| API ручные тесты   | curl / HTTPie       | Быстрая проверка сценариев       |
| Frontend тесты     | Browser + DevTools   | Ручное сценарное тестирование    |
| Линтер/форматтер   | ruff / black         | Качество кода backend            |

## 5. Тестовое окружение

| Компонент  | Технология / Версия         |
|-----------|-----------------------------|
| ОС        | Linux (Arch/Ubuntu)         |
| Backend   | Python 3.11+, FastAPI, Uvicorn |
| БД        | PostgreSQL 14+              |
| Frontend  | HTML5, ES6+, Vanilla JS     |
| Запуск    | Docker Compose (`backend`, `db`) + статика через `python -m http.server` |
| Браузер   | Chrome / Firefox актуальной версии |

## 6. Типы тестов и покрытие

| Тип                              | Назначение                                  | План кол-во |
|----------------------------------|---------------------------------------------|------------|
| Юнит-тесты сервисов              | Логика работы с конфигами, токенами        | 8          |
| Интеграционные тесты API         | Эндпоинты auth, configs, public            | 18         |
| Тесты аутентификации/авторизации| Логин, refresh (если есть), доступ к данным| 6          |
| Тесты безопасности               | SQLi/XSS/чужие конфиги                     | 4          |
| Функциональные UI тесты          | Основные пользовательские сценарии         | 8          |

**Итого целевых тест‑кейсов:** ~44.

## 7. Риски и меры

| Риск                                 | Вероятн. | Влияние | Меры |
|--------------------------------------|----------|---------|------|
| Некорректная настройка CORS/JWT      | Средняя  | Высокое | Проверка `.env`, отдельные API‑тесты |
| Повреждение тестовой БД              | Низкая   | Среднее | Фикстуры для пересоздания схемы      |
| Несогласованность фронта и API схему| Средняя  | Среднее | Контракт‑тесты, ручная проверка UI   |
| Баги в терминальном эмуляторе       | Средняя  | Среднее | Набор целевых UI сценариев           |

## 8. Критерии входа и выхода

**Вход:**

- Backend поднимается без ошибок, тестовая БД развёрнута.
- Frontend страницы доступны локально.
- Базовый happy‑path (регистрация, логин, создание конфига) работает вручную.

**Выход:**

- Все критические и high‑severity дефекты исправлены или задокументированы.
- Не менее 85% тест-кейсов прошли успешно.
- Основные пользовательские сценарии работают во всех целевых браузерах.
- Подготовлен отчет `TEST_RESULTS_CRANESHELL.md`.

## 9. Тестовые данные

### Тестовые пользователи

| # | Email                    | Пароль     | Роль       |
|---|--------------------------|-----------|-----------|
| 1 | test1@craneshell.dev    | Test123!  | обычный   |
| 2 | test2@craneshell.dev    | Test123!  | обычный   |

### Пример конфигов

- `Tokyo-Night` — тёмная тема, контрастные цвета.
- `Solarized-Light` — светлая, мягкая палитра.
- `Mono-Green` — все оттенки зелёного для проверки терминала.

---

## Пример `TEST_RESULTS_CRANESHELL.md`

# План тестирования — Craneshell

## 1. Общая информация

Этот документ описывает стратегию и объём тестирования веб-приложения **Craneshell** — сервиса для создания и управления терминальными цветовыми темами. Приложение состоит из **Backend на FastAPI + PostgreSQL** и **multi-page Frontend (HTML/JS/CSS)**.

Цель тестирования — убедиться, что аутентификация, CRUD для конфигов, публичные темы и интерактивный конфигуратор (16‑цветная палитра + терминал) работают корректно и безопасно.

## 2. Цели тестирования

1. Проверить функциональность всех основных API эндпоинтов (`/api/auth/*`, `/api/configs/*`, `/api/public/*`, `/api/health`).
2. Валидировать CRUD операции для пользовательских конфигов (создание, редактирование, удаление, публикация).
3. Убедиться в корректной работе JWT аутентификации и разграничения доступа к конфигам по пользователю.
4. Проверить интеграцию frontend страниц (`login.html`, `dashboard.html`, `configurator.html`, `profile.html`, `public.html`) с API.
5. Проверить корректность работы **интерактивного терминала** и 16‑цветной палитры на странице `configurator.html`.
6. Оценить устойчивость к базовым угрозам безопасности (SQL injection, XSS, несанкционированный доступ к чужим конфигам).
7. Проверить обработку ошибок и UX (валидация форм, сообщения об ошибках, состояния loading/empty).

## 3. Область тестирования

### В области тестирования

- Backend API:
  - Регистрация и логин пользователя.
  - CRUD для конфигов (личные и публичные).
  - Получение списка публичных конфигов с пагинацией и фильтрами.
  - Health‑check эндпоинт.
- Frontend:
  - Страница логина/регистрации (`login.html`).
  - Dashboard с таблицей/картами конфигов (`dashboard.html`).
  - Конфигуратор с 16 цветами и интерактивным терминалом (`configurator.html`).
  - Страница профиля с базовой статистикой (`profile.html`).
  - Публичные темы с поиском и фильтрами (`public.html`).
- Авторизация:
  - Доступ к приватным конфигам только владельцу.
  - Попытка чтения/удаления чужого конфига.
- UI/UX:
  - Состояния: loading, empty, error.
  - Адаптивность (desktop + basic mobile).

### Вне области тестирования

- Нагрузочное тестирование (>100 одновременных пользователей).
- Полное кросс‑браузерное покрытие (фокус на Chromium/Firefox).
- Accessibility аудит (WCAG).
- Интеграция с внешними сервисами (если появятся позже).

## 4. Стратегия тестирования

Сочетание **автоматизированных тестов backend** (pytest + httpx/TestClient) и **ручного функционального тестирования frontend** в браузере.

### Инструменты

| Тип                | Инструмент           | Описание                          |
|--------------------|----------------------|-----------------------------------|
| Тест-раннер        | pytest               | Юнит и интеграционные тесты API  |
| HTTP-клиент        | httpx / TestClient   | Тестирование FastAPI эндпоинтов  |
| БД для тестов      | PostgreSQL test DB   | Отдельная тестовая схема/БД      |
| API ручные тесты   | curl / HTTPie       | Быстрая проверка сценариев       |
| Frontend тесты     | Browser + DevTools   | Ручное сценарное тестирование    |
| Линтер/форматтер   | ruff / black         | Качество кода backend            |

## 5. Тестовое окружение

| Компонент  | Технология / Версия         |
|-----------|-----------------------------|
| ОС        | Linux (Arch/Ubuntu)         |
| Backend   | Python 3.11+, FastAPI, Uvicorn |
| БД        | PostgreSQL 14+              |
| Frontend  | HTML5, ES6+, Vanilla JS     |
| Запуск    | Docker Compose (`backend`, `db`) + статика через `python -m http.server` |
| Браузер   | Chrome / Firefox актуальной версии |

## 6. Типы тестов и покрытие

| Тип                              | Назначение                                  | План кол-во |
|----------------------------------|---------------------------------------------|------------|
| Юнит-тесты сервисов              | Логика работы с конфигами, токенами        | 8          |
| Интеграционные тесты API         | Эндпоинты auth, configs, public            | 18         |
| Тесты аутентификации/авторизации| Логин, refresh (если есть), доступ к данным| 6          |
| Тесты безопасности               | SQLi/XSS/чужие конфиги                     | 4          |
| Функциональные UI тесты          | Основные пользовательские сценарии         | 8          |

**Итого целевых тест‑кейсов:** ~44.

## 7. Риски и меры

| Риск                                 | Вероятн. | Влияние | Меры |
|--------------------------------------|----------|---------|------|
| Некорректная настройка CORS/JWT      | Средняя  | Высокое | Проверка `.env`, отдельные API‑тесты |
| Повреждение тестовой БД              | Низкая   | Среднее | Фикстуры для пересоздания схемы      |
| Несогласованность фронта и API схему| Средняя  | Среднее | Контракт‑тесты, ручная проверка UI   |
| Баги в терминальном эмуляторе       | Средняя  | Среднее | Набор целевых UI сценариев           |

## 8. Критерии входа и выхода

**Вход:**

- Backend поднимается без ошибок, тестовая БД развёрнута.
- Frontend страницы доступны локально.
- Базовый happy‑path (регистрация, логин, создание конфига) работает вручную.

**Выход:**

- Все критические и high‑severity дефекты исправлены или задокументированы.
- Не менее 85% тест-кейсов прошли успешно.
- Основные пользовательские сценарии работают во всех целевых браузерах.
- Подготовлен отчет `TEST_RESULTS_CRANESHELL.md`.

## 9. Тестовые данные

### Тестовые пользователи

| # | Email                    | Пароль     | Роль       |
|---|--------------------------|-----------|-----------|
| 1 | test1@craneshell.dev    | Test123!  | обычный   |
| 2 | test2@craneshell.dev    | Test123!  | обычный   |

### Пример конфигов

- `Tokyo-Night` — тёмная тема, контрастные цвета.
- `Solarized-Light` — светлая, мягкая палитра.
- `Mono-Green` — все оттенки зелёного для проверки терминала.
